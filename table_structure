









Today
You said
-- 1) Internship Batches CREATE TABLE internship_batches ( batch_code BIGINT AUTO_INCREMENT PRIMARY KEY, course_name VARCHAR(255) NOT NULL, trainer_name VARCHAR(255) NOT NULL, start_date DATE NOT NULL, end_date DATE NOT NULL, total_seats INT NOT NULL, available_seats INT NOT NULL ); -- 2) Registered Colleges CREATE TABLE registered_colleges ( college_id BIGINT AUTO_INCREMENT PRIMARY KEY, college_name VARCHAR(255) UNIQUE NOT NULL, state VARCHAR(100) NOT NULL, city VARCHAR(100) NOT NULL, pincode VARCHAR(20) NOT NULL ); -- 3) College Registration CREATE TABLE college_registration ( registration_id BIGINT AUTO_INCREMENT PRIMARY KEY, college_id BIGINT NOT NULL, college_name VARCHAR(255) NOT NULL, state VARCHAR(100) NOT NULL, city VARCHAR(100) NOT NULL, pincode VARCHAR(20) NOT NULL, FOREIGN KEY (college_id) REFERENCES registered_colleges(college_id) ); -- 4) Users CREATE TABLE users ( user_id BIGINT AUTO_INCREMENT PRIMARY KEY, user_name VARCHAR(255) NOT NULL, college_name VARCHAR(255) NOT NULL, contact_no VARCHAR(20) NOT NULL, course_name VARCHAR(255) NOT NULL, start_date DATE, end_date DATE, batch_code BIGINT NOT NULL, FOREIGN KEY (batch_code) REFERENCES internship_batches(batch_code) ); -- 5) Performance CREATE TABLE performance ( id BIGINT AUTO_INCREMENT PRIMARY KEY, user_id BIGINT NOT NULL, user_name VARCHAR(255) NOT NULL, performance VARCHAR(255), stipend DECIMAL(10,2), FOREIGN KEY (user_id) REFERENCES users(user_id) ); -- 6) Payment CREATE TABLE payment ( payment_id BIGINT AUTO_INCREMENT PRIMARY KEY, registration_id BIGINT NOT NULL, payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, payment_mode VARCHAR(50) NOT NULL, amount DECIMAL(10,2) NOT NULL, FOREIGN KEY (registration_id) REFERENCES college_registration(registration_id) ); -- 7) Trainer CREATE TABLE trainer ( trainer_id BIGINT AUTO_INCREMENT PRIMARY KEY, trainer_name VARCHAR(255) NOT NULL, location VARCHAR(255) NOT NULL, contact_no VARCHAR(20) NOT NULL, experience INT NOT NULL, certifications VARCHAR(500) ); -- 8) Trainer Login CREATE TABLE trainer_login ( trainer_id BIGINT PRIMARY KEY, password VARCHAR(255) NOT NULL, FOREIGN KEY (trainer_id) REFERENCES trainer(trainer_id) ); -- 9) User Login CREATE TABLE user_login ( user_id BIGINT PRIMARY KEY, password VARCHAR(255) NOT NULL, FOREIGN KEY (user_id) REFERENCES users(user_id) ); -- 10) Stipend CREATE TABLE stipend ( id BIGINT AUTO_INCREMENT PRIMARY KEY, user_id BIGINT NOT NULL, user_name VARCHAR(255) NOT NULL, payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, payment_mode VARCHAR(50) NOT NULL, amount DECIMAL(10,2) NOT NULL, FOREIGN KEY (user_id) REFERENCES users(user_id) ); -- 11) Feedback CREATE TABLE feedback ( id BIGINT AUTO_INCREMENT PRIMARY KEY, user_id BIGINT NOT NULL, user_name VARCHAR(255) NOT NULL, batch_code BIGINT NOT NULL, trainer_name VARCHAR(255) NOT NULL, date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, feedback TEXT, rating INT NOT NULL CHECK (rating BETWEEN 1 AND 5), FOREIGN KEY (user_id) REFERENCES users(user_id), FOREIGN KEY (batch_code) REFERENCES internship_batches(batch_code) ); Here you can see how the project is structure   INTERN-CONNECT the admin can do -> -> the admin can add the register college || endpoint will be - /api/admin/registered-colleges -> the admin can make payment for registration || endpoint- /api/admin/registration-payment -> the admin can register a trainer || endpoint- /api/admin/trainers -> create the trainer password || endpoint -/api/admin/trainers/{trainerId}/password?password=xyz // trainerId is coming from trainer table where we register the trainer -> create the batches || endpoint - /api/admin/batches -> admin can initiate the stipend for particular user -------------------- /api/admin/stipend -> View all payments endpoint /api/admin/payments -> View all users endpoint /api/admin/users -> View all batches endpoint /api/admin/batches -> View all trainers endpoint /api/admin/trainers -> we can also give some more access to admin like to delete the trainer or user or college the user can do -> fill the user details -> -> firstly user can check available college endpoint -/api/user/college/{collegeName} -> enroll in a intership endpoint ---------------------- /api/user/enroll -> create the password ---------------------------/api/user/{userId}/password?password=abcd   // fetching the userid form the user table -> user login ----------------------------------/api/user/login -> view user performance -----------------/api/user/{userId}/performance -> view stipend history ------------------/api/user/{userId}/stipend-history -> user can give feed back --------------/api/user/feedback -> user can view batch details -----------/api/user/batch/{batchCode} -> USEE EMAIL the trainer can do ---- (temp mail) /to the particular trainer like hey Prakhar this is you trainer id and password //// validation // popups -> login ----------/api/trainer/login -> trainer can see their batches ----------------/api/trainer/batches?trainerName=prakhar -> trainer can see students in batches ---------/api/trainer/batches/{batchCode}/students -> trainer can update the user performance -----/api/trainer/performance -> trainer can add stipend ----------------------/api/trainer/stipend ----- trainer can only update the performance table but payment will be initiated by the admin (stipend) -> trainer can view feedback form their batches----/api/trainer/feedback?trainerName=Prakhar ------one more features we can add like attendance trainer can give the attendance to user and the user can see their attendance. create the model, repository(dao,daoimplement) , services (service,service implement), exception, dto, controllers create at least i want to check these in postman using the jwt security

creating the constructor getter setter and to string dont use lombok

backend structure would be like below

com.finalproject.internMgmtSystem
->InternMgmtSystemApplication
package com.finalproject.internMgmtSystem;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class InternMgmtSystemApplication {

	public static void main(String[] args) {
		SpringApplication.run(InternMgmtSystemApplication.class, args);
	}

}
similarly create all folder and file
controllers
dto
exception
model
repository
service
util

make the security using jwt 
spring.application.name=hotalMgmt
server.port=9090

spring.datasource.url=jdbc:mysql://localhost:3306/hotalmgmt_database

spring.datasource.username=root
spring.datasource.password=Genpact@123456789

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.springframework.jdbc.datasource=DEBUG
spring.session.jdbc.initialize-schema=always
Copilot said

See my thinking
Intern management system backend (Spring Boot + JWT)
You’ve got a clear vision. Below is a complete skeleton you can run, extend, and test in Postman with JWT. It includes models, DTOs, repositories (DAO), services, exceptions, controllers, util, security config, and one minimal Attendance feature. No Lombok; all constructors/getters/setters/toString are manual.

Project structure
Code


Copy
com.finalproject.internMgmtSystem
├── InternMgmtSystemApplication.java
├── controllers
│   ├── AdminController.java
│   ├── TrainerController.java
│   ├── UserController.java
│   └── AuthController.java
├── dto
│   ├── AuthRequest.java
│   ├── AuthResponse.java
│   ├── CollegeDTO.java
│   ├── TrainerDTO.java
│   ├── BatchDTO.java
│   ├── UserDTO.java
│   ├── PaymentDTO.java
│   ├── PerformanceDTO.java
│   ├── StipendDTO.java
│   ├── FeedbackDTO.java
│   └── AttendanceDTO.java
├── exception
│   ├── ApiException.java
│   ├── ResourceNotFoundException.java
│   └── GlobalExceptionHandler.java
├── model
│   ├── InternshipBatch.java
│   ├── RegisteredCollege.java
│   ├── CollegeRegistration.java
│   ├── User.java
│   ├── Performance.java
│   ├── Payment.java
│   ├── Trainer.java
│   ├── TrainerLogin.java
│   ├── UserLogin.java
│   ├── Stipend.java
│   ├── Feedback.java
│   └── Attendance.java
├── repository
│   ├── InternshipBatchRepository.java
│   ├── RegisteredCollegeRepository.java
│   ├── CollegeRegistrationRepository.java
│   ├── UserRepository.java
│   ├── PerformanceRepository.java
│   ├── PaymentRepository.java
│   ├── TrainerRepository.java
│   ├── TrainerLoginRepository.java
│   ├── UserLoginRepository.java
│   ├── StipendRepository.java
│   ├── FeedbackRepository.java
│   └── AttendanceRepository.java
├── service
│   ├── AdminService.java
│   ├── AdminServiceImpl.java
│   ├── TrainerService.java
│   ├── TrainerServiceImpl.java
│   ├── UserService.java
│   ├── UserServiceImpl.java
│   ├── AuthService.java
│   └── AuthServiceImpl.java
├── util
│   ├── JwtUtil.java
│   └── Roles.java
└── security
    ├── SecurityConfig.java
    ├── JwtAuthFilter.java
    ├── CustomUserDetailsService.java
    └── PasswordConfig.java
Application entrypoint
java


Copy
package com.finalproject.internMgmtSystem;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class InternMgmtSystemApplication {
    public static void main(String[] args) {
        SpringApplication.run(InternMgmtSystemApplication.class, args);
    }
}
Models
InternshipBatch
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "internship_batches")
public class InternshipBatch {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long batchCode;

    @Column(nullable = false)
    private String courseName;

    @Column(nullable = false)
    private String trainerName;

    @Column(nullable = false)
    private LocalDate startDate;

    @Column(nullable = false)
    private LocalDate endDate;

    @Column(nullable = false)
    private Integer totalSeats;

    @Column(nullable = false)
    private Integer availableSeats;

    public InternshipBatch() {}
    public InternshipBatch(String courseName, String trainerName, LocalDate startDate, LocalDate endDate, Integer totalSeats, Integer availableSeats) {
        this.courseName = courseName;
        this.trainerName = trainerName;
        this.startDate = startDate;
        this.endDate = endDate;
        this.totalSeats = totalSeats;
        this.availableSeats = availableSeats;
    }
    // getters, setters, toString
    // ...
}
RegisteredCollege
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;

@Entity
@Table(name = "registered_colleges")
public class RegisteredCollege {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long collegeId;

    @Column(unique = true, nullable = false)
    private String collegeName;

    @Column(nullable = false)
    private String state;

    @Column(nullable = false)
    private String city;

    @Column(nullable = false)
    private String pincode;

    public RegisteredCollege() {}
    public RegisteredCollege(String collegeName, String state, String city, String pincode) {
        this.collegeName = collegeName;
        this.state = state;
        this.city = city;
        this.pincode = pincode;
    }
    // getters, setters, toString
}
CollegeRegistration
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;

@Entity
@Table(name = "college_registration")
public class CollegeRegistration {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long registrationId;

    @ManyToOne(optional = false)
    @JoinColumn(name = "college_id")
    private RegisteredCollege college;

    @Column(nullable = false)
    private String collegeName;

    @Column(nullable = false)
    private String state;

    @Column(nullable = false)
    private String city;

    @Column(nullable = false)
    private String pincode;

    public CollegeRegistration() {}
    // getters, setters, toString
}
User
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "users")
public class User {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long userId;

    @Column(nullable = false)
    private String userName;

    @Column(nullable = false)
    private String collegeName;

    @Column(nullable = false)
    private String contactNo;

    @Column(nullable = false)
    private String courseName;

    private LocalDate startDate;
    private LocalDate endDate;

    @ManyToOne(optional = false)
    @JoinColumn(name = "batch_code")
    private InternshipBatch batch;

    public User() {}
    // getters, setters, toString
}
Performance
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.math.BigDecimal;

@Entity
@Table(name = "performance")
public class Performance {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(optional = false)
    @JoinColumn(name = "user_id")
    private User user;

    @Column(nullable = false)
    private String userName;

    private String performance;

    private BigDecimal stipend;

    public Performance() {}
    // getters, setters, toString
}
Payment
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "payment")
public class Payment {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long paymentId;

    @ManyToOne(optional = false)
    @JoinColumn(name = "registration_id")
    private CollegeRegistration registration;

    @Column(nullable = false)
    private String paymentMode;

    @Column(nullable = false)
    private BigDecimal amount;

    @Column(nullable = false)
    private LocalDateTime paymentDate = LocalDateTime.now();

    public Payment() {}
    // getters, setters, toString
}
Trainer
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;

@Entity
@Table(name = "trainer")
public class Trainer {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long trainerId;

    @Column(nullable = false)
    private String trainerName;

    @Column(nullable = false)
    private String location;

    @Column(nullable = false)
    private String contactNo;

    @Column(nullable = false)
    private Integer experience;

    @Column(length = 500)
    private String certifications;

    public Trainer() {}
    // getters, setters, toString
}
TrainerLogin
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;

@Entity
@Table(name = "trainer_login")
public class TrainerLogin {
    @Id
    private Long trainerId;

    @OneToOne(optional = false)
    @MapsId
    @JoinColumn(name = "trainer_id")
    private Trainer trainer;

    @Column(nullable = false)
    private String password;

    public TrainerLogin() {}
    // getters, setters, toString
}
UserLogin
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;

@Entity
@Table(name = "user_login")
public class UserLogin {
    @Id
    private Long userId;

    @OneToOne(optional = false)
    @MapsId
    @JoinColumn(name = "user_id")
    private User user;

    @Column(nullable = false)
    private String password;

    public UserLogin() {}
    // getters, setters, toString
}
Stipend
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "stipend")
public class Stipend {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(optional = false)
    @JoinColumn(name = "user_id")
    private User user;

    @Column(nullable = false)
    private String userName;

    @Column(nullable = false)
    private String paymentMode;

    @Column(nullable = false)
    private BigDecimal amount;

    @Column(nullable = false)
    private LocalDateTime paymentDate = LocalDateTime.now();

    public Stipend() {}
    // getters, setters, toString
}
Feedback
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

@Entity
@Table(name = "feedback")
public class Feedback {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(optional = false) @JoinColumn(name = "user_id")
    private User user;

    @ManyToOne(optional = false) @JoinColumn(name = "batch_code")
    private InternshipBatch batch;

    @Column(nullable = false)
    private String userName;

    @Column(nullable = false)
    private String trainerName;

    @Column(nullable = false)
    private Integer rating;

    @Column(columnDefinition = "TEXT")
    private String feedback;

    @Column(nullable = false)
    private LocalDateTime date = LocalDateTime.now();

    public Feedback() {}
    // getters, setters, toString
}
Attendance
java


Copy
package com.finalproject.internMgmtSystem.model;

import jakarta.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "attendance")
public class Attendance {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(optional = false) @JoinColumn(name = "user_id")
    private User user;

    @ManyToOne(optional = false) @JoinColumn(name = "batch_code")
    private InternshipBatch batch;

    @Column(nullable = false)
    private LocalDate date;

    @Column(nullable = false)
    private Boolean present;

    public Attendance() {}
    // getters, setters, toString
}
DTOs
java


Copy
package com.finalproject.internMgmtSystem.dto;

public class AuthRequest {
    private String username; // could be trainerName or userName or adminName
    private String password;
    private String role; // ADMIN/TRAINER/USER
    public AuthRequest() {}
    // getters, setters, toString
}
java


Copy
package com.finalproject.internMgmtSystem.dto;

public class AuthResponse {
    private String token;
    public AuthResponse() {}
    public AuthResponse(String token) { this.token = token; }
    // getters, setters, toString
}
Similar simple POJOs for:

CollegeDTO (collegeName, state, city, pincode)

TrainerDTO (trainerName, location, contactNo, experience, certifications)

BatchDTO (courseName, trainerName, startDate, endDate, totalSeats, availableSeats)

UserDTO (userName, collegeName, contactNo, courseName, startDate, endDate, batchCode)

PaymentDTO (registrationId, paymentMode, amount)

PerformanceDTO (userId, performance, stipend)

StipendDTO (userId, paymentMode, amount)

FeedbackDTO (userId, batchCode, trainerName, rating, feedback)

AttendanceDTO (userId, batchCode, date, present)

Repositories (DAO)
java


Copy
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.*;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.List;
import java.util.Optional;

public interface InternshipBatchRepository extends JpaRepository<InternshipBatch, Long> {
    List<InternshipBatch> findByTrainerName(String trainerName);
}

public interface RegisteredCollegeRepository extends JpaRepository<RegisteredCollege, Long> {
    Optional<RegisteredCollege> findByCollegeName(String collegeName);
}

public interface CollegeRegistrationRepository extends JpaRepository<CollegeRegistration, Long> {}

public interface UserRepository extends JpaRepository<User, Long> {
    List<User> findByBatch_BatchCode(Long batchCode);
    Optional<User> findByUserName(String userName);
}

public interface PerformanceRepository extends JpaRepository<Performance, Long> {
    List<Performance> findByUser_UserId(Long userId);
}

public interface PaymentRepository extends JpaRepository<Payment, Long> {}

public interface TrainerRepository extends JpaRepository<Trainer, Long> {
    Optional<Trainer> findByTrainerName(String trainerName);
}

public interface TrainerLoginRepository extends JpaRepository<TrainerLogin, Long> {}

public interface UserLoginRepository extends JpaRepository<UserLogin, Long> {}

public interface StipendRepository extends JpaRepository<Stipend, Long> {
    List<Stipend> findByUser_UserId(Long userId);
}

public interface FeedbackRepository extends JpaRepository<Feedback, Long> {
    List<Feedback> findByBatch_BatchCode(Long batchCode);
    List<Feedback> findByTrainerName(String trainerName);
}

public interface AttendanceRepository extends JpaRepository<Attendance, Long> {
    List<Attendance> findByUser_UserId(Long userId);
    List<Attendance> findByBatch_BatchCode(Long batchCode);
}
Services
Interfaces
java


Copy
package com.finalproject.internMgmtSystem.service;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.model.*;
import java.util.List;

public interface AdminService {
    RegisteredCollege addRegisteredCollege(CollegeDTO dto);
    Payment makeRegistrationPayment(PaymentDTO dto);
    Trainer registerTrainer(TrainerDTO dto);
    void setTrainerPassword(Long trainerId, String password);
    InternshipBatch createBatch(BatchDTO dto);
    Stipend initiateStipend(StipendDTO dto);

    List<Payment> getAllPayments();
    List<User> getAllUsers();
    List<InternshipBatch> getAllBatches();
    List<Trainer> getAllTrainers();

    void deleteTrainer(Long trainerId);
    void deleteUser(Long userId);
    void deleteCollege(Long collegeId);
}

public interface TrainerService {
    List<InternshipBatch> getBatchesByTrainerName(String trainerName);
    List<User> getStudentsInBatch(Long batchCode);
    Performance updateUserPerformance(PerformanceDTO dto);
    Stipend addStipend(StipendDTO dto); // stored, but admin can also initiate
    List<Feedback> viewFeedbackByTrainer(String trainerName);
    Attendance markAttendance(AttendanceDTO dto);
}

public interface UserService {
    RegisteredCollege getCollegeByName(String collegeName);
    User enroll(UserDTO dto);
    void setUserPassword(Long userId, String password);
    List<Performance> getPerformance(Long userId);
    List<Stipend> getStipendHistory(Long userId);
    Feedback giveFeedback(FeedbackDTO dto);
    InternshipBatch getBatchDetails(Long batchCode);
    List<Attendance> getAttendance(Long userId);
}

public interface AuthService {
    String login(AuthRequest request); // returns JWT
}
Implementations (samples)
java


Copy
package com.finalproject.internMgmtSystem.service;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.exception.ResourceNotFoundException;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.repository.*;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.List;

@Service
public class AdminServiceImpl implements AdminService {
    private final RegisteredCollegeRepository collegeRepo;
    private final CollegeRegistrationRepository registrationRepo;
    private final PaymentRepository paymentRepo;
    private final TrainerRepository trainerRepo;
    private final TrainerLoginRepository trainerLoginRepo;
    private final InternshipBatchRepository batchRepo;
    private final StipendRepository stipendRepo;
    private final UserRepository userRepo;
    private final PasswordEncoder encoder;

    public AdminServiceImpl(RegisteredCollegeRepository collegeRepo,
                            CollegeRegistrationRepository registrationRepo,
                            PaymentRepository paymentRepo,
                            TrainerRepository trainerRepo,
                            TrainerLoginRepository trainerLoginRepo,
                            InternshipBatchRepository batchRepo,
                            StipendRepository stipendRepo,
                            UserRepository userRepo,
                            PasswordEncoder encoder) {
        this.collegeRepo = collegeRepo;
        this.registrationRepo = registrationRepo;
        this.paymentRepo = paymentRepo;
        this.trainerRepo = trainerRepo;
        this.trainerLoginRepo = trainerLoginRepo;
        this.batchRepo = batchRepo;
        this.stipendRepo = stipendRepo;
        this.userRepo = userRepo;
        this.encoder = encoder;
    }

    @Override
    public RegisteredCollege addRegisteredCollege(CollegeDTO dto) {
        RegisteredCollege c = new RegisteredCollege(dto.getCollegeName(), dto.getState(), dto.getCity(), dto.getPincode());
        return collegeRepo.save(c);
    }

    @Override
    public Payment makeRegistrationPayment(PaymentDTO dto) {
        CollegeRegistration reg = registrationRepo.findById(dto.getRegistrationId())
                .orElseThrow(() -> new ResourceNotFoundException("Registration not found"));
        Payment p = new Payment();
        p.setRegistration(reg);
        p.setPaymentMode(dto.getPaymentMode());
        p.setAmount(new BigDecimal(dto.getAmount().toString()));
        return paymentRepo.save(p);
    }

    @Override
    public Trainer registerTrainer(TrainerDTO dto) {
        Trainer t = new Trainer();
        t.setTrainerName(dto.getTrainerName());
        t.setLocation(dto.getLocation());
        t.setContactNo(dto.getContactNo());
        t.setExperience(dto.getExperience());
        t.setCertifications(dto.getCertifications());
        return trainerRepo.save(t);
    }

    @Override
    public void setTrainerPassword(Long trainerId, String password) {
        Trainer t = trainerRepo.findById(trainerId)
                .orElseThrow(() -> new ResourceNotFoundException("Trainer not found"));
        TrainerLogin tl = new TrainerLogin();
        tl.setTrainer(t);
        tl.setPassword(encoder.encode(password));
        trainerLoginRepo.save(tl);
    }

    @Override
    public InternshipBatch createBatch(BatchDTO dto) {
        InternshipBatch b = new InternshipBatch(
                dto.getCourseName(),
                dto.getTrainerName(),
                LocalDate.parse(dto.getStartDate()),
                LocalDate.parse(dto.getEndDate()),
                dto.getTotalSeats(),
                dto.getAvailableSeats()
        );
        return batchRepo.save(b);
    }

    @Override
    public Stipend initiateStipend(StipendDTO dto) {
        User user = userRepo.findById(dto.getUserId())
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        Stipend s = new Stipend();
        s.setUser(user);
        s.setUserName(user.getUserName());
        s.setPaymentMode(dto.getPaymentMode());
        s.setAmount(new BigDecimal(dto.getAmount().toString()));
        return stipendRepo.save(s);
    }

    @Override public List<Payment> getAllPayments(){ return paymentRepo.findAll(); }
    @Override public List<User> getAllUsers(){ return userRepo.findAll(); }
    @Override public List<InternshipBatch> getAllBatches(){ return batchRepo.findAll(); }
    @Override public List<Trainer> getAllTrainers(){ return trainerRepo.findAll(); }

    @Override public void deleteTrainer(Long trainerId){ trainerRepo.deleteById(trainerId); }
    @Override public void deleteUser(Long userId){ userRepo.deleteById(userId); }
    @Override public void deleteCollege(Long collegeId){ collegeRepo.deleteById(collegeId); }
}
java


Copy
package com.finalproject.internMgmtSystem.service;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.exception.ResourceNotFoundException;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.repository.*;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.List;

@Service
public class UserServiceImpl implements UserService {
    private final RegisteredCollegeRepository collegeRepo;
    private final UserRepository userRepo;
    private final InternshipBatchRepository batchRepo;
    private final UserLoginRepository userLoginRepo;
    private final PerformanceRepository performanceRepo;
    private final StipendRepository stipendRepo;
    private final FeedbackRepository feedbackRepo;
    private final AttendanceRepository attendanceRepo;
    private final PasswordEncoder encoder;

    public UserServiceImpl(RegisteredCollegeRepository collegeRepo,
                           UserRepository userRepo,
                           InternshipBatchRepository batchRepo,
                           UserLoginRepository userLoginRepo,
                           PerformanceRepository performanceRepo,
                           StipendRepository stipendRepo,
                           FeedbackRepository feedbackRepo,
                           AttendanceRepository attendanceRepo,
                           PasswordEncoder encoder) {
        this.collegeRepo = collegeRepo;
        this.userRepo = userRepo;
        this.batchRepo = batchRepo;
        this.userLoginRepo = userLoginRepo;
        this.performanceRepo = performanceRepo;
        this.stipendRepo = stipendRepo;
        this.feedbackRepo = feedbackRepo;
        this.attendanceRepo = attendanceRepo;
        this.encoder = encoder;
    }

    @Override
    public RegisteredCollege getCollegeByName(String collegeName) {
        return collegeRepo.findByCollegeName(collegeName)
                .orElseThrow(() -> new ResourceNotFoundException("College not found"));
    }

    @Override
    public User enroll(UserDTO dto) {
        InternshipBatch batch = batchRepo.findById(dto.getBatchCode())
                .orElseThrow(() -> new ResourceNotFoundException("Batch not found"));
        if (batch.getAvailableSeats() <= 0) throw new RuntimeException("No seats available");
        User u = new User();
        u.setUserName(dto.getUserName());
        u.setCollegeName(dto.getCollegeName());
        u.setContactNo(dto.getContactNo());
        u.setCourseName(dto.getCourseName());
        u.setStartDate(LocalDate.parse(dto.getStartDate()));
        u.setEndDate(LocalDate.parse(dto.getEndDate()));
        u.setBatch(batch);
        User saved = userRepo.save(u);
        batch.setAvailableSeats(batch.getAvailableSeats() - 1);
        return saved;
    }

    @Override
    public void setUserPassword(Long userId, String password) {
        User user = userRepo.findById(userId)
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        UserLogin ul = new UserLogin();
        ul.setUser(user);
        ul.setPassword(encoder.encode(password));
        userLoginRepo.save(ul);
    }

    @Override public List<Performance> getPerformance(Long userId){ return performanceRepo.findByUser_UserId(userId); }
    @Override public List<Stipend> getStipendHistory(Long userId){ return stipendRepo.findByUser_UserId(userId); }

    @Override
    public Feedback giveFeedback(FeedbackDTO dto) {
        User user = userRepo.findById(dto.getUserId())
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        InternshipBatch batch = batchRepo.findById(dto.getBatchCode())
                .orElseThrow(() -> new ResourceNotFoundException("Batch not found"));
        Feedback f = new Feedback();
        f.setUser(user);
        f.setBatch(batch);
        f.setUserName(user.getUserName());
        f.setTrainerName(dto.getTrainerName());
        f.setRating(dto.getRating());
        f.setFeedback(dto.getFeedback());
        return feedbackRepo.save(f);
    }

    @Override
    public InternshipBatch getBatchDetails(Long batchCode) {
        return batchRepo.findById(batchCode)
                .orElseThrow(() -> new ResourceNotFoundException("Batch not found"));
    }

    @Override
    public List<Attendance> getAttendance(Long userId) {
        return attendanceRepo.findByUser_UserId(userId);
    }
}
java


Copy
package com.finalproject.internMgmtSystem.service;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.exception.ResourceNotFoundException;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.repository.*;
import org.springframework.stereotype.Service;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.List;

@Service
public class TrainerServiceImpl implements TrainerService {
    private final InternshipBatchRepository batchRepo;
    private final UserRepository userRepo;
    private final PerformanceRepository performanceRepo;
    private final StipendRepository stipendRepo;
    private final FeedbackRepository feedbackRepo;
    private final AttendanceRepository attendanceRepo;

    public TrainerServiceImpl(InternshipBatchRepository batchRepo,
                              UserRepository userRepo,
                              PerformanceRepository performanceRepo,
                              StipendRepository stipendRepo,
                              FeedbackRepository feedbackRepo,
                              AttendanceRepository attendanceRepo) {
        this.batchRepo = batchRepo;
        this.userRepo = userRepo;
        this.performanceRepo = performanceRepo;
        this.stipendRepo = stipendRepo;
        this.feedbackRepo = feedbackRepo;
        this.attendanceRepo = attendanceRepo;
    }

    @Override public List<InternshipBatch> getBatchesByTrainerName(String trainerName){
        return batchRepo.findByTrainerName(trainerName);
    }

    @Override public List<User> getStudentsInBatch(Long batchCode){
        return userRepo.findByBatch_BatchCode(batchCode);
    }

    @Override
    public Performance updateUserPerformance(PerformanceDTO dto) {
        User user = userRepo.findById(dto.getUserId())
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        Performance p = new Performance();
        p.setUser(user);
        p.setUserName(user.getUserName());
        p.setPerformance(dto.getPerformance());
        if (dto.getStipend() != null) p.setStipend(new BigDecimal(dto.getStipend().toString()));
        return performanceRepo.save(p);
    }

    @Override
    public Stipend addStipend(StipendDTO dto) {
        User user = userRepo.findById(dto.getUserId())
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        Stipend s = new Stipend();
        s.setUser(user);
        s.setUserName(user.getUserName());
        s.setPaymentMode(dto.getPaymentMode());
        s.setAmount(new BigDecimal(dto.getAmount().toString()));
        return stipendRepo.save(s);
    }

    @Override public List<Feedback> viewFeedbackByTrainer(String trainerName){
        return feedbackRepo.findByTrainerName(trainerName);
    }

    @Override
    public Attendance markAttendance(AttendanceDTO dto) {
        User user = userRepo.findById(dto.getUserId())
                .orElseThrow(() -> new ResourceNotFoundException("User not found"));
        InternshipBatch batch = batchRepo.findById(dto.getBatchCode())
                .orElseThrow(() -> new ResourceNotFoundException("Batch not found"));
        Attendance att = new Attendance();
        att.setUser(user);
        att.setBatch(batch);
        att.setDate(LocalDate.parse(dto.getDate()));
        att.setPresent(dto.getPresent());
        return attendanceRepo.save(att);
    }
}
java


Copy
package com.finalproject.internMgmtSystem.service;

import com.finalproject.internMgmtSystem.dto.AuthRequest;
import com.finalproject.internMgmtSystem.util.JwtUtil;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.stereotype.Service;

@Service
public class AuthServiceImpl implements AuthService {
    private final AuthenticationManager authManager;
    private final JwtUtil jwtUtil;

    public AuthServiceImpl(AuthenticationManager authManager, JwtUtil jwtUtil) {
        this.authManager = authManager;
        this.jwtUtil = jwtUtil;
    }

    @Override
    public String login(AuthRequest request) {
        authManager.authenticate(new UsernamePasswordAuthenticationToken(
                request.getRole() + ":" + request.getUsername(), request.getPassword()));
        return jwtUtil.generateToken(request.getRole(), request.getUsername());
    }
}
Exceptions
java


Copy
package com.finalproject.internMgmtSystem.exception;

public class ApiException extends RuntimeException {
    public ApiException(String msg){ super(msg); }
}
java


Copy
package com.finalproject.internMgmtSystem.exception;

public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String msg){ super(msg); }
}
java


Copy
package com.finalproject.internMgmtSystem.exception;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import java.util.Map;

@RestControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity<?> handleNotFound(ResourceNotFoundException ex){
        return ResponseEntity.status(404).body(Map.of("error", ex.getMessage()));
    }
    @ExceptionHandler(ApiException.class)
    public ResponseEntity<?> handleApi(ApiException ex){
        return ResponseEntity.badRequest().body(Map.of("error", ex.getMessage()));
    }
    @ExceptionHandler(Exception.class)
    public ResponseEntity<?> handleGeneric(Exception ex){
        return ResponseEntity.status(500).body(Map.of("error", "Internal error"));
    }
}
Security (JWT)
Roles
java


Copy
package com.finalproject.internMgmtSystem.util;

public class Roles {
    public static final String ADMIN = "ADMIN";
    public static final String TRAINER = "TRAINER";
    public static final String USER = "USER";
}
JwtUtil
java


Copy
package com.finalproject.internMgmtSystem.util;

import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import java.util.Date;
import org.springframework.stereotype.Component;

@Component
public class JwtUtil {
    private final String SECRET = "VerySecretKeyForInternMgmtSystem";
    private final long EXP_MS = 1000 * 60 * 60; // 1 hour

    public String generateToken(String role, String username) {
        return Jwts.builder()
                .setSubject(role + ":" + username)
                .claim("role", role)
                .claim("username", username)
                .setIssuedAt(new Date())
                .setExpiration(new Date(System.currentTimeMillis() + EXP_MS))
                .signWith(SignatureAlgorithm.HS256, SECRET)
                .compact();
    }

    public String extractSubject(String token) {
        return Jwts.parser().setSigningKey(SECRET)
                .parseClaimsJws(token).getBody().getSubject();
    }

    public String extractRole(String token) {
        return (String) Jwts.parser().setSigningKey(SECRET)
                .parseClaimsJws(token).getBody().get("role");
    }
}
CustomUserDetailsService
java


Copy
package com.finalproject.internMgmtSystem.security;

import com.finalproject.internMgmtSystem.model.TrainerLogin;
import com.finalproject.internMgmtSystem.model.UserLogin;
import com.finalproject.internMgmtSystem.repository.TrainerLoginRepository;
import com.finalproject.internMgmtSystem.repository.UserLoginRepository;
import org.springframework.security.core.userdetails.*;
import org.springframework.stereotype.Service;

@Service
public class CustomUserDetailsService implements UserDetailsService {
    private final TrainerLoginRepository trainerLoginRepo;
    private final UserLoginRepository userLoginRepo;

    public CustomUserDetailsService(TrainerLoginRepository trainerLoginRepo, UserLoginRepository userLoginRepo) {
        this.trainerLoginRepo = trainerLoginRepo;
        this.userLoginRepo = userLoginRepo;
    }

    @Override
    public UserDetails loadUserByUsername(String composite) throws UsernameNotFoundException {
        // composite format: ROLE:username (username = trainerName OR userName OR adminName)
        String[] parts = composite.split(":", 2);
        if (parts.length != 2) throw new UsernameNotFoundException("Invalid principal");
        String role = parts[0]; String username = parts[1];

        if ("ADMIN".equals(role)) {
            // Admin is hardcoded for demo
            return User.withUsername(composite).password("{noop}admin@123").roles("ADMIN").build();
        } else if ("TRAINER".equals(role)) {
            // map trainerName -> trainerLogin by traversing trainer repository in prod
            // demo: assume trainerId=1
            TrainerLogin tl = trainerLoginRepo.findById(1L).orElseThrow(() -> new UsernameNotFoundException("Trainer not found"));
            return User.withUsername(composite).password(tl.getPassword()).roles("TRAINER").build();
        } else if ("USER".equals(role)) {
            UserLogin ul = userLoginRepo.findById(1L).orElseThrow(() -> new UsernameNotFoundException("User not found"));
            return User.withUsername(composite).password(ul.getPassword()).roles("USER").build();
        }
        throw new UsernameNotFoundException("Role not supported");
    }
}
Password encoder
java


Copy
package com.finalproject.internMgmtSystem.security;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;

@Configuration
public class PasswordConfig {
    @Bean
    public PasswordEncoder passwordEncoder(){ return new BCryptPasswordEncoder(); }
}
JwtAuthFilter
java


Copy
package com.finalproject.internMgmtSystem.security;

import com.finalproject.internMgmtSystem.util.JwtUtil;
import jakarta.servlet.*;
import jakarta.servlet.http.*;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.*;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.stereotype.Component;
import java.io.IOException;

@Component
public class JwtAuthFilter extends GenericFilter {
    private final JwtUtil jwtUtil;
    private final UserDetailsService uds;

    public JwtAuthFilter(JwtUtil jwtUtil, UserDetailsService uds) {
        this.jwtUtil = jwtUtil;
        this.uds = uds;
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        String auth = request.getHeader("Authorization");
        if (auth != null && auth.startsWith("Bearer ")) {
            String token = auth.substring(7);
            String subject = jwtUtil.extractSubject(token);
            if (subject != null && SecurityContextHolder.getContext().getAuthentication() == null) {
                UserDetails details = uds.loadUserByUsername(subject);
                UsernamePasswordAuthenticationToken authToken =
                        new UsernamePasswordAuthenticationToken(details, null, details.getAuthorities());
                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
                SecurityContextHolder.getContext().setAuthentication(authToken);
            }
        }
        chain.doFilter(req, res);
    }
}
SecurityConfig
java


Copy
package com.finalproject.internMgmtSystem.security;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.*;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.*;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.core.userdetails.UserDetailsService;

@Configuration
public class SecurityConfig {
    private final JwtAuthFilter jwtAuthFilter;
    private final UserDetailsService uds;

    public SecurityConfig(JwtAuthFilter jwtAuthFilter, UserDetailsService uds) {
        this.jwtAuthFilter = jwtAuthFilter;
        this.uds = uds;
    }

    @Bean
    public AuthenticationManager authenticationManager() {
        return new ProviderManager(new DaoAuthenticationProvider(){{
            setUserDetailsService(uds);
        }});
    }

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.csrf(csrf -> csrf.disable())
            .sessionManagement(sm -> sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/auth/login").permitAll()
                .requestMatchers("/api/admin/**").hasRole("ADMIN")
                .requestMatchers("/api/trainer/**").hasRole("TRAINER")
                .requestMatchers("/api/user/**").hasRole("USER")
                .anyRequest().authenticated()
            )
            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);
        return http.build();
    }
}
Controllers
AuthController
java


Copy
package com.finalproject.internMgmtSystem.controllers;

import com.finalproject.internMgmtSystem.dto.AuthRequest;
import com.finalproject.internMgmtSystem.dto.AuthResponse;
import com.finalproject.internMgmtSystem.service.AuthService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/auth")
public class AuthController {
    private final AuthService authService;
    public AuthController(AuthService authService) { this.authService = authService; }

    @PostMapping("/login")
    public ResponseEntity<AuthResponse> login(@RequestBody AuthRequest req){
        String token = authService.login(req);
        return ResponseEntity.ok(new AuthResponse(token));
    }
}
AdminController
java


Copy
package com.finalproject.internMgmtSystem.controllers;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.service.AdminService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import java.util.List;

@RestController
@RequestMapping("/api/admin")
public class AdminController {
    private final AdminService adminService;
    public AdminController(AdminService adminService){ this.adminService = adminService; }

    @PostMapping("/registered-colleges")
    public ResponseEntity<RegisteredCollege> addCollege(@RequestBody CollegeDTO dto){
        return ResponseEntity.ok(adminService.addRegisteredCollege(dto));
    }

    @PostMapping("/registration-payment")
    public ResponseEntity<Payment> makePayment(@RequestBody PaymentDTO dto){
        return ResponseEntity.ok(adminService.makeRegistrationPayment(dto));
    }

    @PostMapping("/trainers")
    public ResponseEntity<Trainer> registerTrainer(@RequestBody TrainerDTO dto){
        return ResponseEntity.ok(adminService.registerTrainer(dto));
    }

    @PostMapping("/trainers/{trainerId}/password")
    public ResponseEntity<Void> setTrainerPassword(@PathVariable Long trainerId, @RequestParam String password){
        adminService.setTrainerPassword(trainerId, password);
        return ResponseEntity.ok().build();
    }

    @PostMapping("/batches")
    public ResponseEntity<InternshipBatch> createBatch(@RequestBody BatchDTO dto){
        return ResponseEntity.ok(adminService.createBatch(dto));
    }

    @PostMapping("/stipend")
    public ResponseEntity<Stipend> initiateStipend(@RequestBody StipendDTO dto){
        return ResponseEntity.ok(adminService.initiateStipend(dto));
    }

    @GetMapping("/payments") public List<Payment> viewPayments(){ return adminService.getAllPayments(); }
    @GetMapping("/users") public List<User> viewUsers(){ return adminService.getAllUsers(); }
    @GetMapping("/batches") public List<InternshipBatch> viewBatches(){ return adminService.getAllBatches(); }
    @GetMapping("/trainers") public List<Trainer> viewTrainers(){ return adminService.getAllTrainers(); }

    @DeleteMapping("/trainers/{trainerId}") public ResponseEntity<Void> deleteTrainer(@PathVariable Long trainerId){ adminService.deleteTrainer(trainerId); return ResponseEntity.ok().build(); }
    @DeleteMapping("/users/{userId}") public ResponseEntity<Void> deleteUser(@PathVariable Long userId){ adminService.deleteUser(userId); return ResponseEntity.ok().build(); }
    @DeleteMapping("/colleges/{collegeId}") public ResponseEntity<Void> deleteCollege(@PathVariable Long collegeId){ adminService.deleteCollege(collegeId); return ResponseEntity.ok().build(); }
}
UserController
java


Copy
package com.finalproject.internMgmtSystem.controllers;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.service.UserService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import java.util.List;

@RestController
@RequestMapping("/api/user")
public class UserController {
    private final UserService userService;
    public UserController(UserService userService){ this.userService = userService; }

    @GetMapping("/college/{collegeName}")
    public ResponseEntity<RegisteredCollege> getCollege(@PathVariable String collegeName){
        return ResponseEntity.ok(userService.getCollegeByName(collegeName));
    }

    @PostMapping("/enroll")
    public ResponseEntity<User> enroll(@RequestBody UserDTO dto){
        return ResponseEntity.ok(userService.enroll(dto));
    }

    @PostMapping("/{userId}/password")
    public ResponseEntity<Void> setPassword(@PathVariable Long userId, @RequestParam String password){
        userService.setUserPassword(userId, password);
        return ResponseEntity.ok().build();
    }

    @PostMapping("/login") // alternative path if you want role=USER enforced
    public ResponseEntity<?> loginRedirect(){ return ResponseEntity.status(405).body("Use /api/auth/login"); }

    @GetMapping("/{userId}/performance")
    public List<Performance> performance(@PathVariable Long userId){ return userService.getPerformance(userId); }

    @GetMapping("/{userId}/stipend-history")
    public List<Stipend> stipendHistory(@PathVariable Long userId){ return userService.getStipendHistory(userId); }

    @PostMapping("/feedback")
    public ResponseEntity<Feedback> feedback(@RequestBody FeedbackDTO dto){
        return ResponseEntity.ok(userService.giveFeedback(dto));
    }

    @GetMapping("/batch/{batchCode}")
    public ResponseEntity<InternshipBatch> batchDetails(@PathVariable Long batchCode){
        return ResponseEntity.ok(userService.getBatchDetails(batchCode));
    }

    @GetMapping("/{userId}/attendance")
    public List<Attendance> attendance(@PathVariable Long userId){
        return userService.getAttendance(userId);
    }
}
TrainerController
java


Copy
package com.finalproject.internMgmtSystem.controllers;

import com.finalproject.internMgmtSystem.dto.*;
import com.finalproject.internMgmtSystem.model.*;
import com.finalproject.internMgmtSystem.service.TrainerService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import java.util.List;

@RestController
@RequestMapping("/api/trainer")
public class TrainerController {
    private final TrainerService trainerService;
    public TrainerController(TrainerService trainerService){ this.trainerService = trainerService; }

    @PostMapping("/login")
    public ResponseEntity<?> loginRedirect(){ return ResponseEntity.status(405).body("Use /api/auth/login"); }

    @GetMapping("/batches")
    public List<InternshipBatch> getBatches(@RequestParam String trainerName){
        return trainerService.getBatchesByTrainerName(trainerName);
    }

    @GetMapping("/batches/{batchCode}/students")
    public List<User> getStudents(@PathVariable Long batchCode){
        return trainerService.getStudentsInBatch(batchCode);
    }

    @PostMapping("/performance")
    public ResponseEntity<Performance> updatePerformance(@RequestBody PerformanceDTO dto){
        return ResponseEntity.ok(trainerService.updateUserPerformance(dto));
    }

    @PostMapping("/stipend")
    public ResponseEntity<Stipend> addStipend(@RequestBody StipendDTO dto){
        return ResponseEntity.ok(trainerService.addStipend(dto));
    }

    @GetMapping("/feedback")
    public List<Feedback> feedback(@RequestParam String trainerName){
        return trainerService.viewFeedbackByTrainer(trainerName);
    }

    @PostMapping("/attendance")
    public ResponseEntity<Attendance> markAttendance(@RequestBody AttendanceDTO dto){
        return ResponseEntity.ok(trainerService.markAttendance(dto));
    }
}
application.properties
properties


Copy
spring.application.name=hotalMgmt
server.port=9090

spring.datasource.url=jdbc:mysql://localhost:3306/hotalmgmt_database
spring.datasource.username=root
spring.datasource.password=Genpact@123456789
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.springframework.jdbc.datasource=DEBUG
spring.session.jdbc.initialize-schema=always
Postman quick start
1) Login to get JWT
URL: POST http://localhost:9090/api/auth/login

Body (JSON):

json


Copy
{ "username": "admin", "password": "admin@123", "role": "ADMIN" }
Response will have token:

json


Copy
{ "token": "BearerTokenString" }
Use this token in Authorization header:

Code


Copy
Authorization: Bearer <token>
2) Admin creates trainer
POST /api/admin/trainers

json


Copy
{
  "trainerName": "Prakhar",
  "location": "Lucknow",
  "contactNo": "9999999999",
  "experience": 5,
  "certifications": "AWS, GCP"
}
POST /api/admin/trainers/{trainerId}/password?password=xyz

3) Admin creates batch
POST /api/admin/batches

json


Copy
{
  "courseName": "Java Internship",
  "trainerName": "Prakhar",
  "startDate": "2025-12-01",
  "endDate": "2026-01-15",
  "totalSeats": 30,
  "availableSeats": 30
}
4) User enrolls
Login as USER via /api/auth/login with appropriate credentials once created.

POST /api/user/enroll

json


Copy
{
  "userName": "Aditi",
  "collegeName": "IET Lucknow",
  "contactNo": "8888888888",
  "courseName": "Java Internship",
  "startDate": "2025-12-01",
  "endDate": "2026-01-15",
  "batchCode": 1
}
5) Trainer marks attendance
POST /api/trainer/attendance

json


Copy
{
  "userId": 1,
  "batchCode": 1,
  "date": "2025-12-02",
  "present": true
}
Notes to complete
Fill in getters/setters/toString for all models and DTOs.

Replace demo logic in CustomUserDetailsService to map username to actual entities:

For TRAINER: use TrainerRepository.findByTrainerName(username) then TrainerLogin by trainerId.

For USER: use UserRepository.findByUserName(username) then UserLogin by userId.

For ADMIN: create an Admin table or keep an environment-based account.

Add validation annotations to DTOs (e.g., @NotBlank, @Pattern) and enable them with @Valid in controllers.

Ensure transactional updates for seat decrement on enrollment.

Add email sending (optional) to notify trainer credentials—stub out a MailService if needed.

Attendance feature is minimal; you can add monthly summaries and absence reasons.

If you want, I can generate getters/setters/toString for any model or DTO you’re ready to implement next.






Edit in a page
Message Copilot


